document.addEventListener("DOMContentLoaded",(function(){let e=document.querySelector("body");document.querySelector(".discount-slider")&&new Swiper(".discount-slider",{slidesPerView:"auto",spaceBetween:14,freeMode:!0}),document.querySelector(".special-offer-slider")&&new Swiper(".special-offer-slider",{slidesPerView:"auto",spaceBetween:14,freeMode:!0}),document.querySelectorAll(".card__tocart").forEach(e=>{e.addEventListener("click",(function(){this.closest(".card__bottom").classList.add("added")}))}),document.querySelectorAll(".counter").forEach(e=>{let t=e.querySelector(".counter__input"),l=e.querySelector(".counter__minus");e.querySelector(".counter__plus").addEventListener("click",(function(){t.value++})),l.addEventListener("click",(function(){t.value>0&&t.value--}))});let t=document.querySelectorAll(".form");function l(e){let t=!1;if("tel"==e.getAttribute("type"))t=Inputmask.isValid(e.value,{mask:"+7 999 999-99-99"});else if("email"==e.getAttribute("type")){t=!!/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(e.value)}else if("date"==e.getAttribute("type"))t=""!=e.value&&10==e.value.length&&e.value>"1900-01-01"&&e.value<"2020-01-01";else if("checkbox"==e.getAttribute("type"))t=!!e.checked;else if("radio"==e.getAttribute("type")){let e=document.querySelectorAll('[type="radio"]'),l=0;e.forEach(e=>{e.checked&&l++}),console.log(l),t=l>=1}else{t=!!/^[A-Za-zА-Яа-яЁё]+$/.test(e.value)}return!!t}t.length&&t.forEach(e=>{let t=e.querySelectorAll(".required");e.querySelector(".btn__submit").addEventListener("click",o=>{let c;o.preventDefault();let r=0;t.forEach(e=>{if(c=l(e),!c)return e.classList.add("error"),++r,r;e.classList.remove("error")}),0==r&&e.classList.contains("login-one")&&e.querySelector(".js-auth-tel")&&(e.style.display="none",document.querySelector(".login-two").style.display="block",console.log("отправка"))})}),document.querySelector('input[type="tel"]')&&new Inputmask({mask:"+7 999 999-99-99",clearMaskOnLostFocus:!1,oncomplete:function(){l(this)},onincomplete:function(){l(this)}}).mask(document.querySelectorAll('input[type="tel"]')),document.querySelector(".js-date-input")&&new Inputmask({mask:"99.99.9999",oncomplete:function(){l(this)},onincomplete:function(){l(this)}}).mask(document.querySelectorAll(".js-date-input"));const o=document.querySelectorAll(".sms__input"),c=Array.prototype.slice.call(o);c.forEach((e,t)=>{e.addEventListener("keyup",(function(l){if(69===l.which)return e.value="";let o=e.value,r=o.length;if(8===l.which&&c[t-1])return c[t-1].focus();1===r?(e.value=o.substr(0,1),c[t+1]&&c[t+1].focus()):c[t+1]&&8!=l.which?(e.value=o.substr(0,1),c[t+1].focus(),c[t+1].value=o.substr(1,1)):r>1&&!c[t+1]&&(e.value=o.substr(0,1))}))}),document.querySelectorAll("[data-link-to]").forEach(e=>{e.addEventListener("click",(function(){let e=this.getAttribute("data-link-to"),t=document.querySelector('[data-link="'+e+'"]');this.closest("[data-link-wrapper]").style.display="none",t.style.display="block"}))});let r=document.querySelectorAll("[data-modal-trigger]");r&&r.forEach(t=>{t.addEventListener("click",()=>{!function(t,l){let o,c=t.getAttribute("data-modal-trigger");o=null!=l?document.querySelector('[data-modal="'+l+'"]'):document.querySelector('[data-modal="'+c+'"]');let r=document.createElement("div");r.classList.add("modal__bg"),o.append(r),o.style.display="block",e.classList.add("noscroll"),r.addEventListener("click",(function(){o.removeAttribute("style"),e.classList.remove("noscroll"),r.remove()}));let n=document.querySelectorAll("[data-modal-close]");n&&n.forEach(t=>{t.addEventListener("click",(function(){t.closest("[data-modal]").removeAttribute("style"),r.remove(),e.classList.remove("noscroll")}))})}(t)})});let n=document.querySelector(".js-location-confirm");n&&n.addEventListener("click",(function(){this.closest(".location").remove()}));let u=document.querySelector(".date");u&&(""!=u.querySelector(".input").value?u.querySelector(".date__placeholder").remove():u.addEventListener("click",(function(){this.querySelector(".date__placeholder").remove()})))}));