document.addEventListener("DOMContentLoaded",(function(){let e=document.querySelector("body");document.querySelector(".discount-slider")&&new Swiper(".discount-slider",{slidesPerView:"auto",spaceBetween:14,freeMode:!0}),document.querySelector(".special-offer-slider")&&new Swiper(".special-offer-slider",{slidesPerView:"auto",spaceBetween:14,freeMode:!0}),document.querySelectorAll(".card__tocart").forEach(e=>{e.addEventListener("click",(function(){this.closest(".card__bottom").classList.add("added")}))});let t=document.querySelectorAll(".tabs__btn");t&&t.forEach(e=>{e.addEventListener("click",(function(){let e=this.getAttribute("data-tab"),t=document.querySelector('.tabs__item[data-tab="'+e+'"]');this.closest(".tabs__btns").querySelector(".tabs__btn.active").classList.remove("active"),this.classList.add("active"),this.closest(".tabs").querySelector(".tabs__item.active").classList.remove("active"),t.classList.add("active")}))}),document.querySelectorAll(".counter").forEach(e=>{let t=e.querySelector(".counter__input"),l=e.querySelector(".counter__minus");e.querySelector(".counter__plus").addEventListener("click",(function(){t.value++})),l.addEventListener("click",(function(){t.value>0&&t.value--}))});let l=document.querySelectorAll(".form");function c(e){let t=!1;if("tel"==e.getAttribute("type"))t=Inputmask.isValid(e.value,{mask:"+7 999 999-99-99"});else if("email"==e.getAttribute("type")){t=!!/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(e.value)}else if("search"==e.getAttribute("type")){t=!!/^[а-яА-Я\s.,()]+?\d+/i.test(e.value)}else if("date"==e.getAttribute("type"))t=""!=e.value&&10==e.value.length&&e.value>"1900-01-01"&&e.value<"2020-01-01";else if("checkbox"==e.getAttribute("type"))t=!!e.checked;else if("radio"==e.getAttribute("type")){let e=document.querySelectorAll('[type="radio"]'),l=0;e.forEach(e=>{e.checked&&l++}),t=l>=1}else if("HTMLTextAreaElement"==e.constructor.name){t=!!/^(?=[а-яa-z0-9])[а-яa-z0-9\s]{1,4000}[а-яa-z0-9]$/i.test(e.value)}else{t=!!/^[A-Za-zА-Яа-яЁё]+$/.test(e.value)}return!!t}l.length&&l.forEach(e=>{let t=e.querySelectorAll(".required");e.querySelector(".btn__submit").addEventListener("click",l=>{let r;l.preventDefault();let o=0;t.forEach(e=>{if(r=c(e),!r)return e.classList.add("error"),++o,o;e.classList.remove("error")}),0==o&&e.classList.contains("login-one")&&e.querySelector(".js-auth-tel")&&(e.style.display="none",document.querySelector(".login-two").style.display="block",console.log("отправка"))})}),document.querySelector('input[type="tel"]')&&new Inputmask({mask:"+7 999 999-99-99",clearMaskOnLostFocus:!1,oncomplete:function(){c(this)},onincomplete:function(){c(this)}}).mask(document.querySelectorAll('input[type="tel"]'));const r=document.querySelectorAll(".sms__input"),o=Array.prototype.slice.call(r);o.forEach((e,t)=>{e.addEventListener("keyup",(function(l){if(69===l.which)return e.value="";let c=e.value,r=c.length;if(8===l.which&&o[t-1])return o[t-1].focus();1===r?(e.value=c.substr(0,1),o[t+1]&&o[t+1].focus()):o[t+1]&&8!=l.which?(e.value=c.substr(0,1),o[t+1].focus(),o[t+1].value=c.substr(1,1)):r>1&&!o[t+1]&&(e.value=c.substr(0,1))}))}),document.querySelectorAll("[data-link-to]").forEach(e=>{e.addEventListener("click",(function(){let e=this.getAttribute("data-link-to"),t=document.querySelector('[data-link="'+e+'"]');this.closest("[data-link-wrapper]").style.display="none",t.style.display="block"}))});let s=document.querySelectorAll("[data-modal-trigger]");s&&s.forEach(t=>{t.addEventListener("click",()=>{!function(t,l){let c,r=t.getAttribute("data-modal-trigger");c=null!=l?document.querySelector('[data-modal="'+l+'"]'):document.querySelector('[data-modal="'+r+'"]');let o=document.createElement("div");o.classList.add("modal__bg"),c.append(o),c.style.display="block",e.classList.add("noscroll"),o.addEventListener("click",(function(){c.removeAttribute("style"),e.classList.remove("noscroll"),o.remove()}));let s=document.querySelectorAll("[data-modal-close]");s&&s.forEach(t=>{t.addEventListener("click",(function(){t.closest("[data-modal]").removeAttribute("style"),o.remove(),e.classList.remove("noscroll")}))})}(t)})});let a=document.querySelector(".js-location-confirm");a&&a.addEventListener("click",(function(){this.closest(".location").remove()}));let n=document.querySelectorAll(".placeholder");n&&n.forEach(e=>{""!=e.querySelector(".input").value?e.querySelector(".placeholder__text").remove():e.addEventListener("click",(function(){this.querySelector(".placeholder__text").remove()}))});let i=document.querySelectorAll(".file__input");i&&i.forEach(e=>{let t=[],l=e.closest(".file");function c(e,t){0!=t.length?e.querySelector(".file__attach").style.display="none":e.querySelector(".file__attach").style.display="block"}function r(e,t){const l=e.querySelector(".submit-files"),c=new DataTransfer;t.forEach(e=>{c.items.add(e)}),l.files=c.files}e.addEventListener("click",e=>{e.target.value=""}),e.addEventListener("change",e=>{let o=e.target.files;Array.from(o).forEach(e=>{t.find(t=>t.name===e.name&&t.lastModified===e.lastModified)||t.push(e)}),function(e,l){let o=l.querySelector(".file__list");o.innerHTML="",c(l,t);for(let a=0;a<e.length;a++){let n=document.createElement("span");n.classList.add("file__item"),n.innerHTML=e[a].name;let i=document.createElement("button");function s(o){o.preventDefault();let n=this.closest(".file__item");t=t.filter(t=>t.name!==e[a].name),n.remove(),c(l,t),r(l,t),i.removeEventListener("click",s)}i.setAttribute("type","button"),i.classList.add("file__remove-button"),i.insertAdjacentHTML("beforeend",'\n                    <svg class="file__remove-icon" fill="#47b200" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="20px" height="20px">\n                        <path d="M 9.15625 6.3125 L 6.3125 9.15625 L 22.15625 25 L 6.21875 40.96875 L 9.03125 43.78125 L 25 27.84375 L 40.9375 43.78125 L 43.78125 40.9375 L 27.84375 25 L 43.6875 9.15625 L 40.84375 6.3125 L 25 22.15625 Z"/>\n                    </svg>\n                '),i.addEventListener("click",s),n.append(i),o.append(n)}r(l,t)}(t,l)})});let u=document.querySelectorAll(".search__item");u&&u.forEach(e=>{e.addEventListener("click",(function(t){let l=e.closest(".address__form").querySelector(".search__input");l.value=e.textContent,l.setAttribute("disabled",""),l.closest(".search").classList.add("selected")}))});let d=document.querySelectorAll(".js-remove");d&&d.forEach(e=>{e.addEventListener("click",(function(){e.closest(".search").classList.remove("selected"),e.closest(".search").querySelector(".search__input").removeAttribute("disabled"),e.closest(".search").querySelector(".search__input").value=""}))})}));