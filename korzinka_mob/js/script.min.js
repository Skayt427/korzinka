document.addEventListener("DOMContentLoaded",(function(){let e=document.querySelector("body");document.querySelector(".discount-slider")&&new Swiper(".discount-slider",{slidesPerView:"auto",spaceBetween:14,freeMode:!0}),document.querySelector(".special-offer-slider")&&new Swiper(".special-offer-slider",{slidesPerView:"auto",spaceBetween:14,freeMode:!0}),document.querySelector(".card-detail__slider")&&new Swiper(".card-detail__slider",{slidesPerView:1,spaceBetween:20,pagination:{el:".swiper-pagination",type:"bullets",clickable:!0}}),document.querySelectorAll(".card__tocart").forEach(e=>{e.addEventListener("click",(function(){this.closest(".card__bottom").classList.add("added")}))});let t=document.querySelectorAll(".tabs__btn");t&&t.forEach(e=>{e.addEventListener("click",(function(){let e=this.getAttribute("data-tab"),t=document.querySelector('.tabs__item[data-tab="'+e+'"]');this.closest(".tabs__btns").querySelector(".tabs__btn.active").classList.remove("active"),this.classList.add("active"),this.closest(".tabs").querySelector(".tabs__item.active").classList.remove("active"),t.classList.add("active")}))}),document.querySelectorAll(".counter").forEach(e=>{let t=e.querySelector(".counter__input"),l=e.querySelector(".counter__minus");e.querySelector(".counter__plus").addEventListener("click",(function(e){e.preventDefault(),t.value++})),l.addEventListener("click",(function(e){e.preventDefault(),t.value>0&&t.value--})),t.addEventListener("input",(function(e){e.preventDefault(),t.value<0&&(t.value=0)}))});let l=document.querySelectorAll(".form");function r(e){let t=!1;if("tel"==e.getAttribute("type"))t=Inputmask.isValid(e.value,{mask:"+7 999 999-99-99"});else if("email"==e.getAttribute("type")){t=!!/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(e.value)}else if("search"==e.getAttribute("type")){t=!!/^[а-яА-Я\s.,()]+?\d+/i.test(e.value)}else if(e.querySelector(".counter__input")){t=!!/^[0-9]$/.test(e.querySelector(".counter__input").value)}else if("date"==e.getAttribute("type"))t=""!=e.value&&10==e.value.length&&e.value>"1900-01-01"&&e.value<"2020-01-01";else if("checkbox"==e.getAttribute("type"))t=!!e.checked;else if("radio"==e.getAttribute("type")){let e=document.querySelectorAll('[type="radio"]'),l=0;e.forEach(e=>{e.checked&&l++}),t=l>=1}else if("HTMLTextAreaElement"==e.constructor.name){t=!!/^(?=[а-яa-z0-9])[а-яa-z0-9\s]{1,4000}[а-яa-z0-9]$/i.test(e.value)}else{t=!!/^[A-Za-zА-Яа-яЁё]+$/.test(e.value)}return!!t}l.length&&l.forEach(e=>{let t=e.querySelectorAll(".required");e.querySelector(".btn__submit").addEventListener("click",l=>{let c;l.preventDefault();let s=0;t.forEach(e=>{if(c=r(e),!c)return e.classList.add("error"),++s,s;e.classList.remove("error")}),0==s&&(e.classList.contains("login-one")&&e.querySelector(".js-auth-tel")?(e.style.display="none",document.querySelector(".login-two").style.display="block",console.log("отправка")):e.classList.contains("card-detail__form")&&(e.querySelector(".btn__submit").classList.add("added"),e.querySelector(".btn__submit").innerHTML="В корзине"))})}),document.querySelector('input[type="tel"]')&&new Inputmask({mask:"+7 999 999-99-99",clearMaskOnLostFocus:!1,oncomplete:function(){r(this)},onincomplete:function(){r(this)}}).mask(document.querySelectorAll('input[type="tel"]'));const c=document.querySelectorAll(".sms__input"),s=Array.prototype.slice.call(c);s.forEach((e,t)=>{e.addEventListener("keyup",(function(l){if(69===l.which)return e.value="";let r=e.value,c=r.length;if(8===l.which&&s[t-1])return s[t-1].focus();1===c?(e.value=r.substr(0,1),s[t+1]&&s[t+1].focus()):s[t+1]&&8!=l.which?(e.value=r.substr(0,1),s[t+1].focus(),s[t+1].value=r.substr(1,1)):c>1&&!s[t+1]&&(e.value=r.substr(0,1))}))}),document.querySelectorAll("[data-link-to]").forEach(e=>{e.addEventListener("click",(function(){let e=this.getAttribute("data-link-to"),t=document.querySelector('[data-link="'+e+'"]');this.closest("[data-link-wrapper]").style.display="none",t.style.display="block"}))});let a=document.querySelectorAll("[data-modal-trigger]");a&&a.forEach(t=>{t.addEventListener("click",()=>{!function(t,l){let r,c=t.getAttribute("data-modal-trigger");r=null!=l?document.querySelector('[data-modal="'+l+'"]'):document.querySelector('[data-modal="'+c+'"]');let s=document.createElement("div");if(s.classList.add("modal__bg"),r.append(s),r.style.display="block",e.classList.add("noscroll"),t.getAttribute("data-active-window")){let e=t.getAttribute("data-active-window");r.querySelectorAll("[data-tab]").forEach(t=>{e==t.getAttribute("data-tab")?t.classList.add("active"):t.classList.remove("active")})}s.addEventListener("click",(function(){r.removeAttribute("style"),e.classList.remove("noscroll"),s.remove()}));let a=document.querySelectorAll("[data-modal-close]");a&&a.forEach(t=>{t.addEventListener("click",(function(){t.closest("[data-modal]").removeAttribute("style"),s.remove(),e.classList.remove("noscroll")}))})}(t)})});let i=document.querySelector(".js-location-confirm");i&&i.addEventListener("click",(function(){this.closest(".location").remove()}));let o=document.querySelectorAll(".placeholder");o&&o.forEach(e=>{""!=e.querySelector(".input").value?e.querySelector(".placeholder__text").remove():e.addEventListener("click",(function(){this.querySelector(".placeholder__text").remove()}))});let n=document.querySelectorAll(".file__input");n&&n.forEach(e=>{let t=[],l=e.closest(".file");function r(e,t){0!=t.length?e.querySelector(".file__attach").style.display="none":e.querySelector(".file__attach").style.display="block"}function c(e,t){const l=e.querySelector(".submit-files"),r=new DataTransfer;t.forEach(e=>{r.items.add(e)}),l.files=r.files}e.addEventListener("click",e=>{e.target.value=""}),e.addEventListener("change",e=>{let s=e.target.files;Array.from(s).forEach(e=>{t.find(t=>t.name===e.name&&t.lastModified===e.lastModified)||t.push(e)}),function(e,l){let s=l.querySelector(".file__list");s.innerHTML="",r(l,t);for(let i=0;i<e.length;i++){let o=document.createElement("span");o.classList.add("file__item"),o.innerHTML=e[i].name;let n=document.createElement("button");function a(s){s.preventDefault();let o=this.closest(".file__item");t=t.filter(t=>t.name!==e[i].name),o.remove(),r(l,t),c(l,t),n.removeEventListener("click",a)}n.setAttribute("type","button"),n.classList.add("file__remove-button"),n.insertAdjacentHTML("beforeend",'\n                    <svg class="file__remove-icon" fill="#47b200" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="20px" height="20px">\n                        <path d="M 9.15625 6.3125 L 6.3125 9.15625 L 22.15625 25 L 6.21875 40.96875 L 9.03125 43.78125 L 25 27.84375 L 40.9375 43.78125 L 43.78125 40.9375 L 27.84375 25 L 43.6875 9.15625 L 40.84375 6.3125 L 25 22.15625 Z"/>\n                    </svg>\n                '),n.addEventListener("click",a),o.append(n),s.append(o)}c(l,t)}(t,l)})});let u=document.querySelectorAll(".search__item");u&&u.forEach(e=>{e.addEventListener("click",(function(t){let l=e.closest(".address__form").querySelector(".search__input");l.value=e.textContent,l.setAttribute("disabled",""),l.closest(".search").classList.add("selected")}))});let d=document.querySelectorAll(".js-remove");d&&d.forEach(e=>{e.addEventListener("click",(function(){e.closest(".search").classList.remove("selected"),e.closest(".search").querySelector(".search__input").removeAttribute("disabled"),e.closest(".search").querySelector(".search__input").value=""}))});let m=document.querySelectorAll(".switcher__item");m&&m.forEach(e=>{e.addEventListener("click",(function(){let t=e.closest(".switcher").querySelector(".switcher__item.active");e!=t&&(t.classList.remove("active"),e.classList.add("active"))}))});let f=document.querySelectorAll(".cart__inner");if(f){let e=[];for(let t of f){let l=new Draggabilly(t,{handle:".draggieHandle",axis:"x"});e.push(l),l.on("dragEnd",(function(){if(this.position.x<=-160){let e=this;this.element.closest(".cart__item").style.transform="scale(0)",window.setTimeout((function(){e.element.closest(".cart__item").remove()}),100)}else this.element.style.left="0"}))}}}));